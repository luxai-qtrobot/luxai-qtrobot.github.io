<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-KQ6W3F7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-KQ6W3F7",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="QTrobot Documentation" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-rh="true">Using ROS blocks | QTrobot Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.luxai.com/docs/tutorials/graphical/studio_ros"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Using ROS blocks | QTrobot Documentation"><meta data-rh="true" name="description" content="signalcellularalt &amp;nbsp;Level:&amp;nbsp; Advanced"><meta data-rh="true" property="og:description" content="signalcellularalt &amp;nbsp;Level:&amp;nbsp; Advanced"><link data-rh="true" rel="icon" href="/img/luxai-favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.luxai.com/docs/tutorials/graphical/studio_ros"><link data-rh="true" rel="alternate" href="https://docs.luxai.com/docs/tutorials/graphical/studio_ros" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.luxai.com/docs/tutorials/graphical/studio_ros" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NHG3L6L4QM-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.2f2f2307.css">
<link rel="preload" href="/assets/js/runtime~main.e5a8cca0.js" as="script">
<link rel="preload" href="/assets/js/main.9df959e8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_luxai_mini.png" alt="LuxAI" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo_luxai_mini.png" alt="LuxAI" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Visual Scripting</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/intro_graphical">Quick start</a></li><li><a class="dropdown__link navbar__link--active" href="/docs/tutorials/intro_studio">Tutorials</a></li><li><a class="dropdown__link" href="/docs/blocks_api">Blocks reference</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Coding</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/intro_code">Quick start</a></li><li><a class="dropdown__link" href="/docs/tutorials/intro_ros">Tutorials</a></li><li><a class="dropdown__link" href="/docs/modules/display">Competences</a></li><li><a class="dropdown__link" href="/docs/api_ros">API references</a></li></ul></div><a class="navbar__item navbar__link" href="/demos">Demos</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/intro_code">QTrobot V2</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/tutorials/graphical/studio_ros">QTrobot V2</a></li><li><a class="dropdown__link" href="/docs/v1/tutorials/graphical/studio_ros">QTrobot V1</a></li></ul></div><a class="navbar__item navbar__link" href="/support">Support</a><a href="https://github.com/luxai-qtrobot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorials/intro_studio">Introduction to QTrobot Studio</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/tutorials/graphical/studio_story">Visual Scripting Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/tutorials/graphical/studio_story">Basic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/tutorials/graphical/studio_visuals">Intermediate</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/tutorials/graphical/studio_ros">Advanced</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/graphical/studio_ros">7. Using ROS blocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/graphical/studio_emotion">8. Human facial emotion imitation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/graphical/studio_emotion_game">9. Emotion game using cards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/graphical/studio_card_mem_game">10. Memory game using cards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/graphical/studio_gesture_mem_game">11. Memory game using gestures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/graphical/studio_reporting_ros">12. Data collection using ROS</a></li></ul></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">🏠</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Visual Scripting Tutorials</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Advanced</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/tutorials/graphical/studio_ros">7. Using ROS blocks</a></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: QTrobot V2</span><div class="theme-doc-markdown markdown"><header><h1>Using ROS blocks</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Overview</h5></div><div class="admonition-content"><span class="material-icons MuiIcon-root" aria-hidden="true">signal_cellular_alt</span> <span> <strong>Level:</strong>  <em>Advanced</em></span><br> <span class="material-icons MuiIcon-root" aria-hidden="true"> track_changes </span> <span> <strong>Goal:</strong>  <em>learn how to program using ROS blocks in QTrobot studio</em></span><br> <span class="material-icons MuiIcon-root" aria-hidden="true"> task_alt </span> <span> <strong>Requirements:</strong></span><ul><li> <!-- --> <a href="/docs/intro_graphical">Quick start with graphical programming</a>  </li><li> <!-- --> <a href="/docs/tutorials/intro_ros">Basic understanding of ROS framework</a></li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-using-ros-with-blockly">Why using ROS with blockly?<a class="hash-link" href="#why-using-ros-with-blockly" title="Direct link to heading">​</a></h2><p>ROS provides a rich sets of software components and libraries which are accessible via ROS messages or service calls. Other programs (e.g. written in Python or C++) can easily make use of functionality provided by these third-party software components. When using blockly (e.g. QTrobot Studio) to program a robot, we also want to be part of this ecosystem and benefits from its limitless functionalities. QTrobot dedicated blocks already leverage ROS to communicate with the robot via messages and services for playing gestures, speaking or interact with the user via tablet. In fact, hundreds of sophisticated and interactive applications (games) have been developed using these blocks. However, we want to have more generic way to</p><ul><li>benefits from QTrobot full functionalities such as human gesture or emotion recognition</li><li>and interact with other custom ROS software written in other programming languages.</li></ul><p>Imagine we want to implement a voice interaction application using blockly which needs a sophisticated speech recognition (e.g. Google speech) or Amazon chatbot AI. In this case, we need to interact with the third-party ROS software from our blockly application.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="luxai-blocks-for-ros">LuxAI blocks for ROS<a class="hash-link" href="#luxai-blocks-for-ros" title="Direct link to heading">​</a></h2><p>QTrobot studio offers very flexible and powerful blocks to handle complex ROS messages and interact with other publishers, subscribers and services. These blocks enable developers to extend their application beyond the capabilities of blockly and add limitless functionalities to their programs.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="message-object-blocks">Message object blocks<a class="hash-link" href="#message-object-blocks" title="Direct link to heading">​</a></h3><p>To provide a generic way to interact with ROS software, we need to handle every type of ROS messages and parameters of services. There are two different blocks in QTrobot studio: one creates generic message object and the other extracts field values from a message object.</p><p>The <strong><em>Create object</em></strong> block uses key-value pairs to construct ROS message and service parameters. Key is simply the name of an item in a message or parameter of a service. Value can be simple string, number, list or even another object. Following examples show how to use QTrobot Studio Create object block to represent some ROS messages and service parameters.</p><p><img loading="lazy" alt="create object" src="/assets/images/ros_create_obj-7d33802c2a950d78c212fff17a095043.png" width="674" height="170"></p><p>To extract specific value from an object, we can use <strong><em>Get element</em></strong> block. It extracts the value of a given key. Let&#x27;s take a look at the following examples.</p><p><img loading="lazy" alt="get element" src="/assets/images/ros_get_key-f50a1a52ecabf4f56c9c1c550ba9fda9.png" width="632" height="213"></p><p>As you can see in the above examples, to get the value of an item, we simply need to specify its key in our Get element block.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ros-publisher-subscriber-and-service-blocks">ROS Publisher, Subscriber and Service blocks<a class="hash-link" href="#ros-publisher-subscriber-and-service-blocks" title="Direct link to heading">​</a></h2><p>Now that we know how to create ROS messages in Blockly, we can use <strong>ROS Publisher</strong> and <strong>ROS Subscriber</strong> blocks to respectively publish and receive ROS messages. Let&#x27;s see first how we can publish a message using <strong>ROS Publisher</strong> block via some examples. Imagine we want to publish &#x27;Hello QT!&#x27; message to /qt_robot/speech/say topic. We also know that the required message type is std_msgs/String. Therefore, we can use the ROS Publisher block as follows:</p><p><img loading="lazy" alt="block publish" src="/assets/images/ros_block_pub-eea768fe3fff7336684c9a47bf3968f0.png" width="675" height="152"></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Note</h5></div><div class="admonition-content"><p>The aim of above example is to show how we can use ROS Publisher block to publish a simple string message. However for QTrobot speech interface, you need to use the dedicated QTrobot <strong><code>Show Says Act</code></strong> block!</p></div></div><p>Let&#x27;s see how we can use our <strong>ROS Subscriber</strong> blocks to read a specific robots&#x27; joint position:</p><p><img loading="lazy" alt="block subscribe" src="/assets/images/ros_block_sub-12f846b2a362c3965f999d60727a10bd.png" width="624" height="201"></p><p>The following example shows how we can configure QTrobot to speak slower (e.g. 50% of its normal speed) with using <strong>ROS Service</strong> call block.</p><p><img loading="lazy" alt="block service" src="/assets/images/ros_block_service-19c890e164ef6dbe17dc95cdcf6633f5.png" width="678" height="174"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorials/graphical/studio_reporting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">QTrobot Studio&#x27;s data collection and analytics</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tutorials/graphical/studio_emotion"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Human facial expression detection using ROS blocks</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Visual Scripting</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro_graphical">Quick start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/intro_studio">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blocks_api">Blocks reference</a></li><li class="footer__item"><a href="https://qtrobot.luxai.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">QTrobot Studio</a></li></ul></div><div class="col footer__col"><div class="footer__title">Coding</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro_code">Quick start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/intro_ros">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/modules/display">Competences</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api_ros">API references</a></li></ul></div><div class="col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/luxai-qtrobot/software" target="_blank" rel="noopener noreferrer" class="footer__link-item">Software</a></li><li class="footer__item"><a href="https://github.com/luxai-qtrobot/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials</a></li><li class="footer__item"><a href="https://github.com/luxai-qtrobot/QA/issues?q=is%3Aopen+is%3Aissue+label%3Aquestion" target="_blank" rel="noopener noreferrer" class="footer__link-item">Q&amp;A</a></li></ul></div><div class="col footer__col"><div class="footer__title">LuxAI S.A.</div><ul class="footer__items"><li class="footer__item"><a href="https://luxai.com/humanoid-social-robot-for-research-and-teaching/" target="_blank" rel="noopener noreferrer" class="footer__link-item">QTrobot for research</a></li><li class="footer__item"><a href="https://luxai.com/assistive-tech-robot-for-special-needs-education/" target="_blank" rel="noopener noreferrer" class="footer__link-item">QTrobot for schools</a></li><li class="footer__item"><a href="https://luxai.com/shop/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li><li class="footer__item"><a class="footer__link-item" href="/support">Get support</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://luxai.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_RC3H"><img src="/img/luxai-favicon.ico" alt="LuxAI" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/img/luxai-favicon.ico" alt="LuxAI" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></a></div><div class="footer__copyright">Copyright © 2022 LuxAI S.A.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e5a8cca0.js"></script>
<script src="/assets/js/main.9df959e8.js"></script>
</body>
</html>