<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="search" type="application/opensearchdescription+xml" title="QTrobot Documentation" href="/opensearch.xml">
<!-- Google Tag Manager -->
              <script>var ck=document.cookie;let internal=ck.search("internalTraffic=true");function enableGTM(){!function(e,t,n,a,o){e[a]=e[a]||[],e[a].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=t.getElementsByTagName(n)[0],c=t.createElement(n);c.async=!0,c.src="https://www.googletagmanager.com/gtm.js?id=GTM-KQ6W3F7",r.parentNode.insertBefore(c,r)}(window,document,"script","dataLayer")}-1==internal&&(console.log("Cookie not set!"),enableGTM())</script>
              <!-- End Google Tag Manager -->
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-rh="true">QTrobot Computation and networking | QTrobot Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.luxai.com/docs/modules/processor"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="QTrobot Computation and networking | QTrobot Documentation"><meta data-rh="true" name="description" content="QTrobot comes with two computers: i) QTRP, a Raspberry Pi based computer to control the main hardware and ii) QTPC, an Intel¬Æ NUC i5/i7 PC to provide more computational power and to accelerate software development cycle. Both computers run on Ubuntu/Debian Linux operating systems and leverage ROS to offer easy-to-use yet very flexible software architecture. QTrobot&#x27;s hardware is easily extendable via USB-C and USB adaptors, for example, to connect external monitor, keyboard and mouse and sensors."><meta data-rh="true" property="og:description" content="QTrobot comes with two computers: i) QTRP, a Raspberry Pi based computer to control the main hardware and ii) QTPC, an Intel¬Æ NUC i5/i7 PC to provide more computational power and to accelerate software development cycle. Both computers run on Ubuntu/Debian Linux operating systems and leverage ROS to offer easy-to-use yet very flexible software architecture. QTrobot&#x27;s hardware is easily extendable via USB-C and USB adaptors, for example, to connect external monitor, keyboard and mouse and sensors."><link data-rh="true" rel="icon" href="/img/luxai-favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.luxai.com/docs/modules/processor"><link data-rh="true" rel="alternate" href="https://docs.luxai.com/docs/modules/processor" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.luxai.com/docs/modules/processor" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NHG3L6L4QM-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b5bf65b3.css">
<link rel="preload" href="/assets/js/runtime~main.a38e2b49.js" as="script">
<link rel="preload" href="/assets/js/main.bfc0bd78.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_luxai_mini.png" alt="LuxAI" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo_luxai_mini.png" alt="LuxAI" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Visual Scripting</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/intro_graphical">Quick start</a></li><li><a class="dropdown__link" href="/docs/tutorials/intro_studio">Tutorials</a></li><li><a class="dropdown__link" href="/docs/blocks_api">Blocks reference</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Coding</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/intro_code">Quick start</a></li><li><a class="dropdown__link" href="/docs/tutorials/intro_ros">Tutorials</a></li><li><a class="dropdown__link navbar__link--active" href="/docs/modules/display">Competences</a></li><li><a class="dropdown__link" href="/docs/api_ros">API references</a></li></ul></div><a class="navbar__item navbar__link" href="/demos">Demos</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/intro_code">QTrobot V2</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/modules/processor">QTrobot V2</a></li><li><a class="dropdown__link" href="/docs/v1/modules/processor">QTrobot V1</a></li></ul></div><a class="navbar__item navbar__link" href="/support">Support</a><a href="https://github.com/luxai-qtrobot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/modules/display">Face and Emotion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/modules/speakers">Sound and Speech</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/modules/microphone">Audio Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/modules/camera">Vision System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/modules/motors">Motion and Actuators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/modules/processor">Computation and Networking</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/modules/processor">Computation and Networking</a></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: QTrobot V2</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>QTrobot Computation and networking</h1></header><p> QTrobot comes with two computers: <em>i)</em> <strong>QTRP</strong>, a Raspberry Pi based computer to control the main hardware and <em>ii)</em> <strong>QTPC</strong>, an Intel¬Æ NUC i5/i7 PC to provide more computational power and to accelerate software development cycle. Both computers run on Ubuntu/Debian Linux operating systems and leverage ROS to offer easy-to-use yet very flexible software architecture. QTrobot&#x27;s hardware is easily extendable via USB-C and USB adaptors, for example, to connect external monitor, keyboard and mouse and sensors.  </p><center><img src="/img/processor.svg" alt="display"></center><br>As it is shown in the above diagram, QTRP (in QTrobot&#x27;s head) is internally connected to QTPC (in QTrobot&#x27;s body) via ethernet cable. All of the QTrobot devices such as display, speakers, microphone and motors are connected to QTRP except the 3D Camera which is connected directly to QTPC. The Wi-Fi of the QTRP is used to create the QTrobot hotspot with the same SSID as the robot‚Äôs serial number (e.g. QTRD000101).<h2 class="anchor anchorWithStickyNavbar_mojV" id="operating-systems">Operating systems<a class="hash-link" href="#operating-systems" title="Direct link to heading">‚Äã</a></h2><p>The older versions of QTrobot came with Ubuntu 16. However, we have updated the operating system of both integrated QTrobot‚Äôs computers to the latest stable version of Linux.  The Nuc PC (QTPC) comes with <strong>Ubuntu 20.04 LTS</strong> and the Raspberry Pi board (QTRP) at the head uses the latest version of <strong>Raspberry Pi OS (Debian Buster)</strong>. Both computers are updated to latest stable version of <strong>ROS Noetic</strong> with <strong>Python 3</strong> as default. The latest is particularly interesting because its opens accessing wider list of open-source software and libraries which use Python 3 such as recent machine and deep learning libraries, voice processing and recognition software.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="networking">Networking<a class="hash-link" href="#networking" title="Direct link to heading">‚Äã</a></h2><p>The following diagrams show two configurations of QTrobot&#x27;s network: <em>i)</em> QTrobot is offline and its WiFi is configured as hotspot (default configuration) and <em>ii)</em> QTrobot is connected to the home/office network via its WiFi. By connecting the WiFi of QTRP to the home/office router with the internet, Nuc PC (QTPC) also gets access to the internet.  Moreover, laptops and other devices which are in the same network as the home router, can be easily configured to access and control QTrobot via ROS.</p><center><img src="/img/network_both_new.png"></center><br><p>There are three system services on QTRP which manage the network setup of QTrobot: </p><ul><li><strong>qt_wlan0_ap</strong>: setup the QTrobot in hotspot mode when it is running.</li><li><strong>qt_wlan0_client</strong>: connects the QTrobot to a home/office router when it is configured and running.</li><li><strong>qt_wifi_manager</strong>: monitors the consistency of QTrobot WiFi setups at boot time and automatically enables the robot&#x27;s hotspot if there is any issue with internet router connectivity.</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Important</h5></div><div class="admonition-content"><ul><li>The <em>qt_wlan0_ap</em> and <em>qt_wlan0_client</em> services are mutually exclusive. That means that both of them cannot be enabled and run simultaneously.  </li><li>Please do not modify or disable the <em>qt_wifi_manager</em> service. This may break the network setup of your QTrobot!</li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-connect-qtrobot-to-the-internet">How to connect QTrobot to the internet<a class="hash-link" href="#how-to-connect-qtrobot-to-the-internet" title="Direct link to heading">‚Äã</a></h3><p>Please follow <a href="/docs/intro_code#qt_to_internet"><strong>Connect QTrobot to a home network and Internet</strong></a> instruction.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-enable-qtrobots-hotspot">How to enable QTrobot&#x27;s hotspot<a class="hash-link" href="#how-to-enable-qtrobots-hotspot" title="Direct link to heading">‚Äã</a></h3><p>QTrobot&#x27;s hotspot is <strong>enabled by default</strong>. However, if you have connected your robot to the internet and would like to disconnect and enable the hotspot, you can simply follow this instruction: </p><p><strong>1.</strong> From the Ubuntu desktop of QTPC, open a terminal and access QTRP via ssh:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">ssh</span><span class="token plain"> developer@QTRP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># password: qtrobot</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>2.</strong> Enable the <em>qt_wlan0_ap</em> service and disable the <em>qt_wlan0_client</em> service:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo systemctl disable qt_wlan0_client.service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo systemctl enable qt_wlan0_ap.service</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>3.</strong> Restart the robot</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ros-setup">ROS setup<a class="hash-link" href="#ros-setup" title="Direct link to heading">‚Äã</a></h2><p>The <code>roscore</code> runs on QTRP  automatically at QTrobot boot time. The QTPC is setup with the correct <code>ROS_MASTER_URI</code> and <code>ROS_IP</code> to access the same ROS network as QTRP. ROS master URI is set to <code>http://&lt;your robot serial&gt;:11311</code> (for example <em>http://QTRD000100:11311</em>). However, you can easily check it by looking into <code>/etc/luxai/ros/env.sh</code> file on QTRP: </p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> /etc/luxai/ros/env.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># export ROS_HOSTNAME=$(hostname).local</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># export ROS_MASTER_URI=http://$ROS_HOSTNAME:11311</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="catkin-workspace">Catkin workspace<a class="hash-link" href="#catkin-workspace" title="Direct link to heading">‚Äã</a></h3><p>For both QTRP and QTPC, the Catkin workspace is already set up and is accessible under <code>/home/qtrobot/catkin_ws</code> folder.  The workspaces also contains some important ROS nodes for QTrobot interfaces such as <code>qt_nuitrack_app</code>, <code>qt_vosk_app</code> and etc. Indeed you can use the same catkin workspace for your own developments but be careful to not remove the <code>src</code> folder within catkin workspace.  </p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Warning</h5></div><div class="admonition-content"><ul><li>You do not need and <strong>should not</strong> run another instance of <code>roscore</code> neither on QTPC nor QTRP nor any other machine which are in the ROS network of QTrobot. </li><li>Do <strong>not delete</strong> the default <code>catkin_ws</code> folders on QTRP nor on QTPC. These folder already used for running some default QTrobot interface nodes such as <code>qt_nuitrack_app</code> on QTPC or <code>qt_vosk_app</code> on QTRP.  </li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="qtrobot-startup-process">QTrobot startup process<a class="hash-link" href="#qtrobot-startup-process" title="Direct link to heading">‚Äã</a></h2><p>The following diagram depicts the <strong>default process</strong> of QTrobot&#x27;s startup. Upon turning on the robot  (either by plugin the power line or by pressing the power button), the QTRP will boot and set up the network for Lan, Wi-Fi hotspot and connecting to the home/office router (if set up). Then it runs the <code>roscore</code> and launch the QTrobot interfaces such as <code>qt_motor</code>, <code>qt_robot_interface</code> and etc. When the basic interfaces is up and running, it then turn on QTPC via wake-on-lan. QTPC then boot up and start the <code>qt_nuitrack_app</code> interface. </p><center><div class="mermaid">graph LR
  A(Power on &lt;br/&gt; QTrobot) --&gt; B(turn on &lt;br/&gt; QTRP);
  B --&gt; B1(&quot;Setup networks&lt;br/&gt;ROS environment&quot;)
  B1 --&gt; C(Run motor, face &lt;br/&gt; and other interfaces)
  B1 --&gt; D(turn on QTPC &lt;br/&gt; via Wake-On-Lan)
  D --&gt; E(Run nuitrack interface)

  style A fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style B fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style B1 fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style C fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style D fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style E fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030   </div></center><p>Powering off QTrobot almost follows the reverse procedure of powering on. The QTrobot&#x27;s power button is connected to Raspberry PI and trigs the power off procedure of QTRP. During the shut down process of QTRP, it also sends power off command to QTPC via SSH so that both computers turn off using a single power button. Below is an overview of the power-off process of QTrobot. </p><center><div class="mermaid">graph RL  
  A(Power off &lt;br/&gt; QTrobot) --&gt; B(start shuting down &lt;br/&gt; QTRP);
  B --&gt; D(stop motor, face &lt;br/&gt; and other interfaces)
  B --&gt; C(&quot;Shutdown QTPC &lt;br/&gt; via SSH command&quot;)   
  C --&gt; E(Stop nuitrack interface)

  style A fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style B fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style C fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style D fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style E fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030   </div></center><h3 class="anchor anchorWithStickyNavbar_mojV" id="what-are-autostart-scripts">What are autostart scripts?<a class="hash-link" href="#what-are-autostart-scripts" title="Direct link to heading">‚Äã</a></h3><p>QTrobot uses some startup scripts (i.e. autostart scripts) for both QTPC and QTRP to start and launch its software and drivers at boot time. Autostart scripts are simply some bash scripts which are executed at QTrobot startup time. There are different set of autostart scripts, one for QTRP and the other set for QTPC. Generally, these scripts launch specific ROS nodes on each machine. For example, as it can be inferred from <a href="#1-qtrobot-architecture">QTrobot Architecture</a>, one of the autostart scripts of QTPC is responsible to launch the <code>qt_nuitrack_app</code> node which provide ROS interface for Nuitrack skeleton tracking using 3D camera. Therefore, <strong>it is very important that you completely understand the purpose of each script</strong> before disabling or modifying the QTrobot autostart behavior.</p><p>The autostart scripts are located in <code>~/robot/autostart</code> folder under <code>qtrobot</code> user. The <code>autostart_screens.sh</code> script is executed automatically at boot time. The other scripts are launched by <code>autostart_screens.sh</code> and their output are redirected to the corresponding log files.  </p><center><div class="mermaid">flowchart LR;
    A(&quot;Cron job
or
qt_user_autostart service&quot;) --&gt; B(autostart_screens.sh);
    B--&gt;C(start_script_1.sh);
    B--&gt;D(start_script_2.sh);   
    B--&gt;E(start_script_3.sh);   
  style A fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style B fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style C fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style D fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030 
  style E fill:#f0f0f0,stroke:614b7f,stroke-width:2px,color:#303030   </div></center><h3 class="anchor anchorWithStickyNavbar_mojV" id="qtpc-autostart-scripts">QTPC autostart scripts<a class="hash-link" href="#qtpc-autostart-scripts" title="Direct link to heading">‚Äã</a></h3><p>The <code>autostart_screens.sh</code> script on QTPC is responsible for launching the <code>qt_nuitrack_app</code> interface and users custom scripts. Here is the list and short descriptions of each autostart script on QTPC: </p><ul><li><strong>start_qt_nuitrack_app.sh</strong> : launch qt_nuitrack_app node (for skeleton tracking, facial feature, gesture recognition and etc.)</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-check-the-log-files-of-autostart-scripts">How to check the log files of autostart scripts<a class="hash-link" href="#how-to-check-the-log-files-of-autostart-scripts" title="Direct link to heading">‚Äã</a></h3><p>All programs/ROS nodes which are run by QTrobot autostart scripts redirect their standard output (info/war/error messages) to their corresponding log file. These log files can be found under <code>~/robot/autostart/logs</code> folder.  </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-run-my-own-script-at-startup-on-qtpc">How to run my own script at startup on QTPC<a class="hash-link" href="#how-to-run-my-own-script-at-startup-on-qtpc" title="Direct link to heading">‚Äã</a></h3><p>For example, to run your custom script on QTPC at the startup, you need to first create a startup script file and call it from <code>autostart_screens.sh</code>. Do the following steps: </p><ul><li><p><strong>[Step 1]</strong> Create custom startup script</p><p>  open a terminal on QTPC and create a bash script file. Let&#x27;s name it <code>start_my_script.sh</code>.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">nano</span><span class="token plain"> ~/robot/autostart/start_my_script.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>  with the following example content: </p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># !/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">source</span><span class="token plain"> /home/qtrobot/robot/autostart/qt_robot.inc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SCRIPT_NAME</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;start_my_script&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LOG_FILE</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">prepare_logfile </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable string variable" style="color:rgb(189, 147, 249);font-style:italic">$SCRIPT_NAME</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">prepare_ros_environment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wait_for_ros_node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/rosout&quot;</span><span class="token plain"> </span><span class="token number">60</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># add your main code here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/bin/echo </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is my script!&quot;</span><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token operator">&amp;&gt;&gt;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${LOG_FILE}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p><strong>[Step 2]</strong> Add it to <code>autostart_screens.sh</code></p><p>  Carefully edit the <code>autostart_screens.sh</code>:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">nano</span><span class="token plain"> ~/robot/autostart/autostart_screens.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>  To add your own script (e.g. <code>start_my_script.sh</code>) you can simply add the following line to the buttom of <code>autostart_screens.sh</code> right before the <code>} &amp;&gt;&gt; ${LOG_FILE}</code> line.
The <code>autostart_screens.sh</code> should look like the following:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wait_for_network        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">run_script &quot;start_my_script.sh&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">} &amp;&gt;&gt; ${LOG_FILE}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p><strong>[Step 3]</strong> Reboot and check
Reboot the QTrobot. After reboot, your script should be executed on startup of QTPC. You can now check the log file of your script: </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cat ~/robot/austostart/logs/start_my_script.log</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/modules/motors"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">QTrobot Motion and Actuators</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#operating-systems" class="table-of-contents__link toc-highlight">Operating systems</a></li><li><a href="#networking" class="table-of-contents__link toc-highlight">Networking</a><ul><li><a href="#how-to-connect-qtrobot-to-the-internet" class="table-of-contents__link toc-highlight">How to connect QTrobot to the internet</a></li><li><a href="#how-to-enable-qtrobots-hotspot" class="table-of-contents__link toc-highlight">How to enable QTrobot&#39;s hotspot</a></li></ul></li><li><a href="#ros-setup" class="table-of-contents__link toc-highlight">ROS setup</a><ul><li><a href="#catkin-workspace" class="table-of-contents__link toc-highlight">Catkin workspace</a></li></ul></li><li><a href="#qtrobot-startup-process" class="table-of-contents__link toc-highlight">QTrobot startup process</a><ul><li><a href="#what-are-autostart-scripts" class="table-of-contents__link toc-highlight">What are autostart scripts?</a></li><li><a href="#qtpc-autostart-scripts" class="table-of-contents__link toc-highlight">QTPC autostart scripts</a></li><li><a href="#how-to-check-the-log-files-of-autostart-scripts" class="table-of-contents__link toc-highlight">How to check the log files of autostart scripts</a></li><li><a href="#how-to-run-my-own-script-at-startup-on-qtpc" class="table-of-contents__link toc-highlight">How to run my own script at startup on QTPC</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Visual Scripting</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro_graphical">Quick start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/intro_studio">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blocks_api">Blocks reference</a></li><li class="footer__item"><a href="https://qtrobot.luxai.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">QTrobot Studio</a></li></ul></div><div class="col footer__col"><div class="footer__title">Coding</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro_code">Quick start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/intro_ros">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/modules/display">Competences</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api_ros">API references</a></li></ul></div><div class="col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/luxai-qtrobot/software" target="_blank" rel="noopener noreferrer" class="footer__link-item">Software</a></li><li class="footer__item"><a href="https://github.com/luxai-qtrobot/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials</a></li><li class="footer__item"><a href="https://github.com/luxai-qtrobot/QA/issues?q=is%3Aopen+is%3Aissue+label%3Aquestion" target="_blank" rel="noopener noreferrer" class="footer__link-item">Q&amp;A</a></li></ul></div><div class="col footer__col"><div class="footer__title">LuxAI S.A.</div><ul class="footer__items"><li class="footer__item"><a href="https://luxai.com/humanoid-social-robot-for-research-and-teaching/" target="_blank" rel="noopener noreferrer" class="footer__link-item">QTrobot for research</a></li><li class="footer__item"><a href="https://luxai.com/assistive-tech-robot-for-special-needs-education/" target="_blank" rel="noopener noreferrer" class="footer__link-item">QTrobot for schools</a></li><li class="footer__item"><a href="https://luxai.com/shop/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li><li class="footer__item"><a class="footer__link-item" href="/support">Get support</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://luxai.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_RC3H"><img src="/img/luxai-favicon.ico" alt="LuxAI" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/img/luxai-favicon.ico" alt="LuxAI" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></a></div><div class="footer__copyright">Copyright ¬© 2022 LuxAI S.A.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a38e2b49.js"></script>
<script src="/assets/js/main.bfc0bd78.js"></script>
</body>
</html>