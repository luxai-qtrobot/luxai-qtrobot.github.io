"use strict";(self.webpackChunkqtrobot_documentation=self.webpackChunkqtrobot_documentation||[]).push([[4376],{4807:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>a});var s=r(5893),l=r(1151);const t={id:"api_js",title:"QTrobot JavaScript API Reference",hide_table_of_contents:!1},i=void 0,o={id:"api_js",title:"QTrobot JavaScript API Reference",description:"The qtrobot.js library is JavaScript SDK for QTrobot. It is a wrapper over roslibjs which facilitate stablishing connection with QTrobot rosbridge and expose simple APIs to interact with the robot's ROS interfaces such as playing gestures, configuring the text-to-speech interface, showing emotion, etc. It also offers some generic functions to call any ROS service (call_service), publish (publish) and subscribe (subscribe) to a generic topic.",source:"@site/docs/api_js.md",sourceDirName:".",slug:"/api_js",permalink:"/docs/api_js",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"api_js",title:"QTrobot JavaScript API Reference",hide_table_of_contents:!1},sidebar:"api_ros",previous:{title:"QTrobot ROS API Reference",permalink:"/docs/api_ros"}},c={},a=[{value:"<strong>constructor</strong>",id:"constructor",level:2},{value:"<strong>call_service</strong>",id:"call_service",level:2},{value:"<strong>publish</strong>",id:"publish",level:2},{value:"<strong>subscribe</strong>",id:"subscribe",level:2},{value:"<strong>show_emotion</strong>",id:"show_emotion",level:2},{value:"<strong>play_gesture</strong>",id:"play_gesture",level:2},{value:"<strong>set_volume</strong>",id:"set_volume",level:2},{value:"<strong>home_motors</strong>",id:"home_motors",level:2},{value:"<strong>say_text</strong>",id:"say_text",level:2},{value:"<strong>configure_tts</strong>",id:"configure_tts",level:2},{value:"<strong>play_audio</strong>",id:"play_audio",level:2},{value:"<strong>talk_text</strong>",id:"talk_text",level:2},{value:"<strong>talk_audio</strong>",id:"talk_audio",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.a,{href:"https://github.com/luxai-qtrobot/software/blob/master/sdk/jscript/src/qtrobot-1.0.js",children:(0,s.jsx)(n.strong,{children:"qtrobot.js"})})," library is JavaScript SDK for QTrobot. It is a wrapper over ",(0,s.jsx)(n.a,{href:"http://wiki.ros.org/roslibjs",children:"roslibjs"})," which facilitate stablishing connection with QTrobot rosbridge and expose simple APIs to interact with the robot's ROS interfaces such as playing gestures, configuring the text-to-speech interface, showing emotion, etc. It also offers some generic functions to call any ROS service (",(0,s.jsx)(n.a,{href:"#call_service",children:"call_service"}),"), publish (",(0,s.jsx)(n.a,{href:"#publish",children:"publish"}),") and subscribe (",(0,s.jsx)(n.a,{href:"#subscribe",children:"subscribe"}),") to a generic topic."]}),"\n",(0,s.jsxs)(n.p,{children:["Please read ",(0,s.jsx)(n.a,{href:"/docs/api_ros",children:"QTrobot Interface documentation"})," for the details description of available ROS interfaces for QTrobot."]}),"\n",(0,s.jsx)(n.h2,{id:"constructor",children:(0,s.jsx)(n.strong,{children:"constructor"})}),"\n",(0,s.jsx)(n.p,{children:"QTrobot constructor method\nthis function will automatically call the connect method with the given 'url' to the constructor"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"params"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object",children:"object"})})," an object with the following fields","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"url"}),": the rosbridge websocket url (e.g. ",(0,s.jsx)(n.code,{children:"ws://127.0.0.1:9090"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"reconnect_time"}),": an optional delay (in ms) before traying to reconnect"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"callback.connection"}),": an optional callback to be called upon connection"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"callback.close"}),": an optional callback to be called on closing/disconnection"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"callback.error"}),": an optional callback to be called upon any error on connection"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"call_service",children:(0,s.jsx)(n.strong,{children:"call_service"})}),"\n",(0,s.jsx)(n.p,{children:"Call a ros service"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_name"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," service name (e.g. /qt_robot/speech/say)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_type"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," service type (e.g.  qt_robot_interface/speech_say)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_params"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object",children:"object"})})," an object specifying the service\u2019s params"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to get the result (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"publish",children:(0,s.jsx)(n.strong,{children:"publish"})}),"\n",(0,s.jsx)(n.p,{children:"Publish to a ros topic"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_name"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," topic name (e.g. /qt_robot/speech/say)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_type"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," topic message type (e.g. std_msgs/String)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_params"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object",children:"object"})})," object specifying the message fields (e.g. {data: 'hello'})"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"subscribe",children:(0,s.jsx)(n.strong,{children:"subscribe"})}),"\n",(0,s.jsx)(n.p,{children:"Subscribe to a ros topic"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_name"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," topic name (e.g. /qt_robot/joints/state)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_type"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," topic message type (e.g.  sensor_msgs/JointState)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to receive the published message (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"show_emotion",children:(0,s.jsx)(n.strong,{children:"show_emotion"})}),"\n",(0,s.jsx)(n.p,{children:"Show a facial emotion on QTrobot display"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"emotion"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," name of the emotion (e.g. QT/happy)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to be called after playing the emotion file (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"play_gesture",children:(0,s.jsx)(n.strong,{children:"play_gesture"})}),"\n",(0,s.jsx)(n.p,{children:"Play a QTrobot recorded gesture"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gesture"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," name of a gesture (e.g. QT/happy)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to be called after playing the gesture (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"set_volume",children:(0,s.jsx)(n.strong,{children:"set_volume"})}),"\n",(0,s.jsx)(n.p,{children:"Set QTrobot speaker volume"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"volume"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number",children:"number"})})," level in percentage (0-100)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to check the result (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"home_motors",children:(0,s.jsx)(n.strong,{children:"home_motors"})}),"\n",(0,s.jsx)(n.p,{children:"Move all QTrobot motors to home position"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to be called after homing all motors (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"say_text",children:(0,s.jsx)(n.strong,{children:"say_text"})}),"\n",(0,s.jsx)(n.p,{children:"Speak a text using QTrobot TTS"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"message"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," text message"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to be called after speaking out the message (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configure_tts",children:(0,s.jsx)(n.strong,{children:"configure_tts"})}),"\n",(0,s.jsx)(n.p,{children:"Configure QTrobot TTS engine"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"language"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," speech language (e.g. en_US) (optional, default ",(0,s.jsx)(n.code,{children:"'default'"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pitch"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number",children:"number"})})," speech pitch value (it may not supported for all voices) (optional, default ",(0,s.jsx)(n.code,{children:"0"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"speed"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number",children:"number"})})," speech talking speed (100 is the normal speed.) (optional, default ",(0,s.jsx)(n.code,{children:"0"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to check the result (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"play_audio",children:(0,s.jsx)(n.strong,{children:"play_audio"})}),"\n",(0,s.jsx)(n.p,{children:"Play a mp3 or wav audio file"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," the name of the audio file without extension (e.g. QT/5LittleBunnies)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," an optional path (leave it empty '' for QTrobot default audio path) (optional, default ",(0,s.jsx)(n.code,{children:"''"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to be called after playing the audio file (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"talk_text",children:(0,s.jsx)(n.strong,{children:"talk_text"})}),"\n",(0,s.jsx)(n.p,{children:"Speak a text using QTrobot TTS with facial emotion (moving mouth)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"message"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," text message"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to be called after speaking out the message (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"talk_audio",children:(0,s.jsx)(n.strong,{children:"talk_audio"})}),"\n",(0,s.jsx)(n.p,{children:"Play a mp3 or wav audio file with facial emotion (moving mouth)\nThis is useful when you want to play a recorded audio speech."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," the name of the audio file without extension"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String",children:"string"})})," an optional path (leave it empty '' for QTrobot default audio path) (optional, default ",(0,s.jsx)(n.code,{children:"''"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"})," ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function",children:"function"})})," a callback to be called after playing the audio file (optional, default ",(0,s.jsx)(n.code,{children:"null"}),")"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);