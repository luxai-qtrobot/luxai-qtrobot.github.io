"use strict";(self.webpackChunkqtrobot_documentation=self.webpackChunkqtrobot_documentation||[]).push([[4376],{62373:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return p},assets:function(){return c},toc:function(){return m},default:function(){return u}});var n=a(87462),l=a(63366),r=(a(67294),a(3905)),o=["components"],i={id:"api_js",title:"QTrobot JavaScript API Reference",hide_table_of_contents:!1},s=void 0,p={unversionedId:"api_js",id:"api_js",title:"QTrobot JavaScript API Reference",description:"The qtrobot.js library is JavaScript SDK for QTrobot. It is a wrapper over roslibjs which facilitate stablishing connection with QTrobot rosbridge and expose simple APIs to interact with the robot's ROS interfaces such as playing gestures, configuring the text-to-speech interface, showing emotion, etc. It also offers some generic functions to call any ROS service (call_service), publish (publish) and subscribe (subscribe) to a generic topic.",source:"@site/docs/api_js.md",sourceDirName:".",slug:"/api_js",permalink:"/docs/api_js",tags:[],version:"current",frontMatter:{id:"api_js",title:"QTrobot JavaScript API Reference",hide_table_of_contents:!1},sidebar:"api_ros",previous:{title:"QTrobot ROS API Reference",permalink:"/docs/api_ros"}},c={},m=[{value:"<strong>constructor</strong>",id:"constructor",level:2},{value:"<strong>call_service</strong>",id:"call_service",level:2},{value:"<strong>publish</strong>",id:"publish",level:2},{value:"<strong>subscribe</strong>",id:"subscribe",level:2},{value:"<strong>show_emotion</strong>",id:"show_emotion",level:2},{value:"<strong>play_gesture</strong>",id:"play_gesture",level:2},{value:"<strong>set_volume</strong>",id:"set_volume",level:2},{value:"<strong>home_motors</strong>",id:"home_motors",level:2},{value:"<strong>say_text</strong>",id:"say_text",level:2},{value:"<strong>configure_tts</strong>",id:"configure_tts",level:2},{value:"<strong>play_audio</strong>",id:"play_audio",level:2},{value:"<strong>talk_text</strong>",id:"talk_text",level:2},{value:"<strong>talk_audio</strong>",id:"talk_audio",level:2}],k={toc:m};function u(e){var t=e.components,a=(0,l.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/luxai-qtrobot/software/blob/master/sdk/jscript/src/qtrobot-1.0.js"},(0,r.kt)("strong",{parentName:"a"},"qtrobot.js"))," library is JavaScript SDK for QTrobot. It is a wrapper over ",(0,r.kt)("a",{parentName:"p",href:"http://wiki.ros.org/roslibjs"},"roslibjs")," which facilitate stablishing connection with QTrobot rosbridge and expose simple APIs to interact with the robot's ROS interfaces such as playing gestures, configuring the text-to-speech interface, showing emotion, etc. It also offers some generic functions to call any ROS service (",(0,r.kt)("a",{parentName:"p",href:"#call_service"},"call_service"),"), publish (",(0,r.kt)("a",{parentName:"p",href:"#publish"},"publish"),") and subscribe (",(0,r.kt)("a",{parentName:"p",href:"#subscribe"},"subscribe"),") to a generic topic."),(0,r.kt)("p",null,"Please read ",(0,r.kt)("a",{parentName:"p",href:"/docs/api_ros"},"QTrobot Interface documentation")," for the details description of available ROS interfaces for QTrobot."),(0,r.kt)("h2",{id:"constructor"},(0,r.kt)("strong",{parentName:"h2"},"constructor")),(0,r.kt)("p",null,"QTrobot constructor method\nthis function will automatically call the connect method with the given 'url' to the constructor"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"params")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object"},"object"))," an object with the following fields",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"url"),": the rosbridge websocket url (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"ws://127.0.0.1:9090"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"reconnect_time"),": an optional delay (in ms) before traying to reconnect"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"callback.connection"),": an optional callback to be called upon connection"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"callback.close"),": an optional callback to be called on closing/disconnection"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"callback.error"),": an optional callback to be called upon any error on connection")))),(0,r.kt)("h2",{id:"call_service"},(0,r.kt)("strong",{parentName:"h2"},"call_service")),(0,r.kt)("p",null,"Call a ros service"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_name")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," service name (e.g. /qt_robot/speech/say)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_type")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," service type (e.g.  qt_robot_interface/speech_say)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_params")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object"},"object"))," an object specifying the service\u2019s params"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to get the result (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"publish"},(0,r.kt)("strong",{parentName:"h2"},"publish")),(0,r.kt)("p",null,"Publish to a ros topic"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_name")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," topic name (e.g. /qt_robot/speech/say)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_type")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," topic message type (e.g. std_msgs/String)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_params")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object"},"object"))," object specifying the message fields (e.g. {data: 'hello'})")),(0,r.kt)("h2",{id:"subscribe"},(0,r.kt)("strong",{parentName:"h2"},"subscribe")),(0,r.kt)("p",null,"Subscribe to a ros topic"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_name")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," topic name (e.g. /qt_robot/joints/state)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_type")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," topic message type (e.g.  sensor_msgs/JointState)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to receive the published message (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"show_emotion"},(0,r.kt)("strong",{parentName:"h2"},"show_emotion")),(0,r.kt)("p",null,"Show a facial emotion on QTrobot display"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"emotion")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," name of the emotion (e.g. QT/happy)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to be called after playing the emotion file (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"play_gesture"},(0,r.kt)("strong",{parentName:"h2"},"play_gesture")),(0,r.kt)("p",null,"Play a QTrobot recorded gesture"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gesture")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," name of a gesture (e.g. QT/happy)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to be called after playing the gesture (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"set_volume"},(0,r.kt)("strong",{parentName:"h2"},"set_volume")),(0,r.kt)("p",null,"Set QTrobot speaker volume"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"volume")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number"},"number"))," level in percentage (0-100)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to check the result (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"home_motors"},(0,r.kt)("strong",{parentName:"h2"},"home_motors")),(0,r.kt)("p",null,"Move all QTrobot motors to home position"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to be called after homing all motors (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"say_text"},(0,r.kt)("strong",{parentName:"h2"},"say_text")),(0,r.kt)("p",null,"Speak a text using QTrobot TTS"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"message")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," text message"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to be called after speaking out the message (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"configure_tts"},(0,r.kt)("strong",{parentName:"h2"},"configure_tts")),(0,r.kt)("p",null,"Configure QTrobot TTS engine"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"language")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," speech language (e.g. en_US) (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"'default'"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pitch")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number"},"number"))," speech pitch value (it may not supported for all voices) (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"0"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"speed")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number"},"number"))," speech talking speed (100 is the normal speed.) (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"0"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to check the result (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"play_audio"},(0,r.kt)("strong",{parentName:"h2"},"play_audio")),(0,r.kt)("p",null,"Play a mp3 or wav audio file"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," the name of the audio file without extension (e.g. QT/5LittleBunnies)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"path")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," an optional path (leave it empty '' for QTrobot default audio path) (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"''"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to be called after playing the audio file (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"talk_text"},(0,r.kt)("strong",{parentName:"h2"},"talk_text")),(0,r.kt)("p",null,"Speak a text using QTrobot TTS with facial emotion (moving mouth)"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"message")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," text message"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to be called after speaking out the message (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")),(0,r.kt)("h2",{id:"talk_audio"},(0,r.kt)("strong",{parentName:"h2"},"talk_audio")),(0,r.kt)("p",null,"Play a mp3 or wav audio file with facial emotion (moving mouth)\nThis is useful when you want to play a recorded audio speech."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," the name of the audio file without extension"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"path")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String"},"string"))," an optional path (leave it empty '' for QTrobot default audio path) (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"''"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"callback")," ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function"},"function"))," a callback to be called after playing the audio file (optional, default ",(0,r.kt)("inlineCode",{parentName:"li"},"null"),")")))}u.isMDXComponent=!0}}]);