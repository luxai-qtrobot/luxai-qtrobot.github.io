"use strict";(self.webpackChunkqtrobot_documentation=self.webpackChunkqtrobot_documentation||[]).push([[277],{3116:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var s=r(5893),n=r(1151),o=r(9656);const i={id:"python_ros_subscribe",title:"QTrobot interfaces using ROS Subscribe",hide_table_of_contents:!0},c=void 0,a={id:"tutorials/python/python_ros_subscribe",title:"QTrobot interfaces using ROS Subscribe",description:"signalcellularalt &nbsp;Level:&nbsp; Basic",source:"@site/docs/tutorials/python/python_ros_subscribe.mdx",sourceDirName:"tutorials/python",slug:"/tutorials/python/python_ros_subscribe",permalink:"/docs/tutorials/python/python_ros_subscribe",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"python_ros_subscribe",title:"QTrobot interfaces using ROS Subscribe",hide_table_of_contents:!0},sidebar:"code_tutorials_sidebar",previous:{title:"QTrobot interfaces using ROS Services",permalink:"/docs/tutorials/python/python_ros_services"},next:{title:"Configure QTrobot TTS language",permalink:"/docs/tutorials/python/python_ros_speech"}},l={},d=[{value:"Create a python project",id:"create-a-python-project",level:2},{value:"QTrobot nuitrack interface - Gestures",id:"qtrobot-nuitrack-interface---gestures",level:2}];function u(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.admonition,{title:"Overview",type:"info",children:[(0,s.jsxs)(t.p,{children:[(0,s.jsx)(o.Z,{children:"signal_cellular_alt"})," \xa0",(0,s.jsx)(t.strong,{children:"Level:"}),"\xa0 ",(0,s.jsx)(t.em,{children:"Basic"}),"\n",(0,s.jsx)("br",{})," ",(0,s.jsx)(o.Z,{children:" track_changes "})," \xa0",(0,s.jsx)(t.strong,{children:"Goal:"}),"\xa0 ",(0,s.jsx)(t.em,{children:"learn how to read QTrobot interfaces in python via ROS Subscribers"}),"\n",(0,s.jsx)("br",{})," ",(0,s.jsx)(o.Z,{children:" task_alt "})," \xa0",(0,s.jsx)(t.strong,{children:"Requirements:"})]}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\xa0\xa0",(0,s.jsx)(t.a,{href:"/docs/intro_code",children:"Quick start with coding on QTrobot"})]}),"\n",(0,s.jsxs)(t.li,{children:["\xa0\xa0",(0,s.jsx)(t.a,{href:"/docs/tutorials/python/python_ros_project",children:"Create a ROS python project"})]}),"\n"]})]}),"\n",(0,s.jsxs)(t.p,{children:["If you have followed our previous tutorials, you should know how to start coding on QTrobot with python and got the basic knowledge of ROS framework. In this tutorial we will learn about how to read some of ",(0,s.jsx)(t.a,{href:"/docs/api_ros#list-of-available-interfaces",children:"QTrobot interfaces"})," using ROS Subscribe."]}),"\n",(0,s.jsx)(t.h2,{id:"create-a-python-project",children:"Create a python project"}),"\n",(0,s.jsxs)(t.p,{children:["First we create a python project for our tutorial. let's call it ",(0,s.jsx)(t.code,{children:"tutorial_qt_subscribe"})," and add the required python file:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'cd ~/catkin_ws/src\ncatkin_create_pkg tutorial_qt_subscribe rospy roscpp -D "Read QTrobot data with ROS Subscribe"\ncd tutorial_qt_subscribe/src\ntouch tutorial_qt_subscribe_node.py\nchmod +x tutorial_qt_subscribe_node.py\n'})}),"\n",(0,s.jsx)(t.h2,{id:"qtrobot-nuitrack-interface---gestures",children:"QTrobot nuitrack interface - Gestures"}),"\n",(0,s.jsxs)(t.p,{children:["Open the ",(0,s.jsx)(t.code,{children:"tutorial_qt_subscribe_node.py"})," file and add the following code:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"#!/usr/bin/env python\nimport sys\nimport rospy\nfrom qt_nuitrack_app.msg import Gestures\n\ndef gesture_callback(msg):\n    rospy.loginfo(msg)\n\nif __name__ == '__main__':\n    rospy.init_node('my_tutorial_node')\n    rospy.loginfo(\"my_tutorial_node started!\")\n\n    # define ros subscriber\n    rospy.Subscriber('/qt_nuitrack_app/gestures', Gestures, gesture_callback)\n   \n    try:\n        rospy.spin()\n    except KeyboardInterrupt:\n        pass\n\n    rospy.loginfo(\"finsihed!\")\n\n"})}),"\n",(0,s.jsxs)(t.p,{children:["First we imported ",(0,s.jsx)(t.code,{children:"Gestures"})," message type from ",(0,s.jsx)(t.code,{children:"qt_nuitrack_app.msg"})," message library. This message type is used in communication with ",(0,s.jsx)(t.code,{children:"/qt_nuitrack_app/gestures"}),"."]}),"\n",(0,s.jsxs)(t.admonition,{title:"Tip",type:"tip",children:[(0,s.jsx)(t.p,{children:"How do we know which messages an interface uses? well, There is a useful command in ROS which tells you that:"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"rostopic info /qt_nuitrack_app/gestures\nType: qt_nuitrack_app/Gestures\n...\n"})})]}),"\n",(0,s.jsxs)(t.p,{children:["Then we created a subscriber for ",(0,s.jsx)(t.code,{children:"/qt_nuitrack_app/gestures"})," with callback function ",(0,s.jsx)(t.code,{children:"gesture_callback"}),' to print any data that comes from that topic.\nStand in front of QTrobot and do one of this gestures ("SWIPE UP", "SWIPE DOWN", "SWIPE LEFT", "SWIPE RIGHT").\nWhen QTrobot detects you, the script should print something like this:']}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'[INFO] [1629900965.371938]: gestures:\n  -\n    id: 2\n    name: "SWIPE UP"\n'})})]})}function h(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);